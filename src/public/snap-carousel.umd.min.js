!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).SnapCarousel={})}(this,(function(t){"use strict";var e,s,i,n,o,r,a,l,c,h,d,u,p,f,g,m,v,b,y,w,x,k,E,C,L,S,T,M,A,P,W,I,j,H,O,R,N=t=>{throw TypeError(t)},$=(t,e,s)=>e.has(t)||N("Cannot "+s),z=(t,e,s)=>($(t,e,"read from private field"),s?s.call(t):e.get(t)),q=(t,e,s)=>e.has(t)?N("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),V=(t,e,s,i)=>($(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s),U=(t,e,s)=>($(t,e,"access private method"),s),D="undefined"!=typeof document?document.currentScript:null;if("undefined"!=typeof window&&!("onscrollend"in window)){let t=function(t,e,s){let i=t[e];t[e]=function(){let t=Array.prototype.slice.apply(arguments,[0]);i.apply(this,t),t.unshift(i),s.apply(this,t)}},e=function(t,e,s,r){if("scroll"!=e&&"scrollend"!=e)return;let a=this,l=o.get(a);if(void 0===l){let e=0;l={scrollListener:t=>{clearTimeout(e),e=setTimeout((()=>{n.size?setTimeout(l.scrollListener,100):(a&&a.dispatchEvent(i),e=0)}),100)},listeners:0},t.apply(a,["scroll",l.scrollListener]),o.set(a,l)}l.listeners++},s=function(t,e,s){if("scroll"!=e&&"scrollend"!=e)return;let i=this,n=o.get(i);void 0!==n&&(--n.listeners>0||(t.apply(i,["scroll",n.scrollListener]),o.delete(i)))};const i=new Event("scrollend"),n=new Set;document.addEventListener("touchstart",(t=>{for(let e of t.changedTouches)n.add(e.identifier)}),{passive:!0}),document.addEventListener("touchend",(t=>{for(let e of t.changedTouches)n.delete(e.identifier)}),{passive:!0}),document.addEventListener("touchcancel",(t=>{for(let e of t.changedTouches)n.delete(e.identifier)}),{passive:!0});let o=new WeakMap;t(Element.prototype,"addEventListener",e),t(window,"addEventListener",e),t(document,"addEventListener",e),t(Element.prototype,"removeEventListener",s),t(window,"removeEventListener",s),t(document,"removeEventListener",s)}const F=class t extends HTMLElement{constructor(){super(),q(this,c),q(this,e,!1),q(this,s,!1),q(this,i,"snap-carousel"),q(this,n,""),q(this,o,{index:0,itemsCount:0,pageCount:0,pages:[],isVisible:!1,autoplayInterval:null,breakpoint:void 0,ready:!1,isMoving:!1,pause:!1,computedPadding:0}),q(this,r,{scroller:null,items:null,sync:null}),q(this,a,{default:{},origin:{},current:{}}),q(this,l,{init:[],updateState:[]}),z(this,a).default=t.defaultConfig,V(this,n,this.getAttribute("style"))}get elements(){return z(this,r)}get settings(){return z(this,a)}get state(){return z(this,o)}get preventUiUpdate(){return z(this,e)}getSlotElements(t,e={fallback:!1}){return U(this,c,I).call(this,t,e)}isDocumentLtr(){return U(this,c,H).call(this)}registerHook(t,e){z(this,l)[t]&&z(this,l)[t].push(e)}static get defaultConfig(){return{autoplay:0,displayed:1,perPage:1,gap:0,padding:0,controls:!1,nav:!1,pager:!1,loop:!1,behavior:"smooth",stop:!1,usePause:!0,vertical:!1,responsive:[],sync:null}}static get observedAttributes(){const e=Object.keys(t.defaultConfig).map((t=>t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()))));return[...e,...e.map((t=>"data-"+t))]}connectedCallback(){if(!this.isConnected)return;const t=document.createElement("template");if(t.innerHTML='<style>:host{display:block;position:relative;width:100%}:host(:not([scrollbar])) ::slotted([slot="scroller"]){scrollbar-width:none}:host(:not([scrollbar])) ::slotted([slot="scroller"])::-webkit-scrollbar{display:none}::slotted([slot="scroller"]){position:relative;margin:0;display:flex;gap:var(--gap);scroll-behavior:var(--behavior)}:host(:not([vertical])) ::slotted([slot="scroller"]){overflow-x:auto;scroll-snap-type:x mandatory;overscroll-behavior-x:contain;scroll-padding-inline:var(--padding);padding-inline:var(--padding)!important}:host([vertical]) ::slotted([slot="scroller"]){flex-direction:column;overflow-y:auto;scroll-snap-type:y mandatory;overscroll-behavior-y:contain;padding-block:var(--padding)!important;scroll-padding-block:var(--padding)}</style><slot name="scroller">\n  <ul></ul>\n</slot>\n\n<div part="controls">\n  <div part="buttons" style="display: none;">\n    <slot name="before-prev"></slot>\n    <slot name="prev-buttons">\n      <button style="display: none;" part="button control-button prev-button" type="button" direction="prev" aria-label="Previous">\n        <slot name="prev-icon"></slot>\n        <slot name="prev-label">Previous</slot>\n      </button>\n    </slot>\n    <slot name="next-buttons">\n      <button style="display: none;" part="button control-button next-button" type="button" direction="next" aria-label="Next">\n        <slot name="next-label">Next</slot>\n        <slot name="next-icon"></slot>\n      </button>\n    </slot>\n    <slot name="after-next"></slot>\n  </div>\n\n  <slot name="pagination">\n    <div part="nav" style="display: none;"></div>\n  </slot>\n\n  <div part="pager" style="display: none;">\n    <slot name="current">\n      <span part="current"></span>\n    </slot>\n    <slot name="sep">\n      <span part="page-sep">&nbsp;/&nbsp;</span>\n    </slot>\n    <slot name="total">\n      <span part="total"></span>\n    </slot>\n  </div>\n</div>\n',this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(t.content.cloneNode(!0)),z(this,r).scroller=U(this,c,I).call(this,"scroller",{fallback:!0})[0],!z(this,r).scroller)return;new MutationObserver((t=>{t.forEach((t=>{(t.addedNodes.length||t.removedNodes.length)&&(U(this,c,p).call(this),U(this,c,u).call(this))}))})).observe(z(this,r).scroller,{childList:!0}),z(this,r).scroller.setAttribute("snpc-s",""),z(this,r).scroller.onscroll=U(this,c,L).bind(this),z(this,r).scroller.addEventListener("scrollend",U(this,c,T).bind(this)),window.addEventListener("resize",U(this,c,C).bind(this)),this.ariaRoleDescription="carousel",Object.assign(z(this,r).scroller,{role:"group",ariaLive:"polite",ariaAtomic:!1}),U(this,c,g).call(this),U(this,c,p).call(this),U(this,c,f).call(this),U(this,c,d).call(this),U(this,c,E).call(this),z(this,o).ready=!0}attributeChangedCallback(){z(this,o).ready&&U(this,c,d).call(this)}goTo(t){V(this,e,!1);const{scroller:s,items:i}=z(this,r),{perPage:n,vertical:l}=z(this,a).current,h=t>z(this,o).pageCount-1?0:t<0?z(this,o).pageCount-1:t,d=i[h*n];U(this,c,A).call(this,h),z(this,o).ready=!0;let u=0,p=0;l?u=d.offsetTop:p=U(this,c,H).call(this)?d.offsetLeft:d.offsetLeft+d.offsetWidth-s.offsetWidth,V(this,e,!0),requestIdleCallback((()=>{s.scrollTo({top:u,left:p})}),{timeout:100})}prev(){this.goTo(this.state.index-1)}next(){this.goTo(this.state.index+1)}static setVisibility(t,e){e?t.removeAttribute("style"):t.setAttribute("style","display: none!important;")}static registerElement(t,e){window.customElements&&customElements.define(t,e)}};e=new WeakMap,s=new WeakMap,i=new WeakMap,n=new WeakMap,o=new WeakMap,r=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakSet,h=function(t,...e){z(this,l)[t]&&z(this,l)[t].forEach((t=>t.apply(this,e)))},d=function(){z(this,o).breakpoint=void 0,z(this,a).origin=Object.assign({},z(this,a).default,U(this,c,v).call(this)),z(this,a).origin.responsive=(z(this,a).origin.responsive||[]).sort(((t,e)=>t.breakpoint-e.breakpoint)),U(this,c,y).call(this)},u=function(){U(this,c,m).call(this,(()=>{U(this,c,w).call(this),U(this,c,x).call(this),U(this,c,k).call(this),U(this,c,A).call(this,0),U(this,c,h).call(this,"init")}))},p=function(){const t=Array.from(z(this,r).scroller.children).filter((t=>!["absolute","fixed","sticky"].includes(getComputedStyle(t).position))),e=t.length;z(this,r).items=t,z(this,o).itemsCount=e,t.forEach(((t,s)=>{t.id=`${this.id}-slide-${s}`,t.dataset.index=s,Object.assign(t,{ariaSetSize:e,ariaPosInSet:s+1,ariaRoleDescription:"slide",role:"listitem"})}))},f=function(){const t=`${z(this,i)}-global-styles`;if(document.querySelector("#"+t))return;document.head.append(U(this,c,j).call(this,"snap-carousel{--sc-item-size: calc( (100% / var(--perpage, 1)) - var(--gap, 0) + (var(--gap, 0) / var(--perpage, 1)) )}snap-carousel:not([scrollbar]) [snpc-s]::-webkit-scrollbar{display:none}[snpc-s]{display:flex}[vertical]>[snpc-s]{flex-direction:column;height:100%}[snpc-s]>[data-index]{display:block;flex:0 0 auto;width:var(--sc-item-size);max-width:100%}[vertical]>[snpc-s]>[data-index]{width:initial;max-width:initial;height:var(--sc-item-size);max-height:100%}[class*=sc-anchor]{scroll-snap-align:start;scroll-snap-stop:normal}.sc-anchor-stop{scroll-snap-stop:always}",t))},g=function(){this.id=z(this,o).id=z(this,i)+"-"+(Math.random()+1).toString(36).substring(4),z(this,r).scroller.id=this.id+"-scroller"},m=function(t){z(this,r).scroller.clientWidth?t():requestAnimationFrame((()=>{U(this,c,m).call(this,t)}))},v=function(){const t=Object.keys(z(this,a).default);return this.attributes.options?U(this,c,b).call(this,this.attributes.options.value):Array.from(this.attributes).reduce(((e,s)=>{const i=s.name.replace("data-","").replace(/-([a-z])/g,(t=>t[1].toUpperCase()));return t.includes(i)&&(e[i]=U(this,c,b).call(this,s.value)),e}),{})},b=function(t){if(""===t)return!0;try{return JSON.parse(t)}catch{return t}},y=function(){const{origin:t}=z(this,a),e=t.responsive.reduce(((t,e)=>e.breakpoint<window.innerWidth?e:t),{breakpoint:null}),s=Object.assign({},t,e.settings||{});s.perPage=Math.min(s.displayed,s.perPage),z(this,a).current=s,z(this,o).breakpoint!==e.breakpoint&&(z(this,o).breakpoint=e.breakpoint,U(this,c,u).call(this))},w=function(){const{current:t}=z(this,a),{itemsCount:e}=z(this,o),s=Math.floor((t.displayed-t.perPage)/t.perPage);z(this,o).pageCount=Math.ceil(e/t.perPage)-s,z(this,o).pages=Array.from({length:z(this,o).pageCount},((s,i)=>{const n=i*t.perPage,o=Math.min(n+t.perPage,e);return Array.from({length:o-n},((t,e)=>z(this,r).items[n+e]))}))},x=function(){const{displayed:t,gap:e,padding:s,perPage:i,stop:o,behavior:r}=z(this,a).current,l=U(this,c,O).call(this,e),h=U(this,c,O).call(this,s),d="sc-anchor"+(o?"-stop":"");this.style=`--perpage: ${t};--gap: ${l};--padding: ${h};--behavior: ${r};${z(this,n)}`,this.elements.items.forEach(((t,e)=>{e%i==0?t.classList.add(d):t.classList.remove(d)}))},k=function(){const{vertical:t}=z(this,a).current,e=t?"padding-top":"padding-left";z(this,o).computedPadding=parseInt(getComputedStyle(z(this,r).scroller)[e],10)},E=function(){const{items:t,scroller:e}=z(this,r);new IntersectionObserver((t=>{const e=t[0];z(this,o).isVisible=e.intersectionRatio>.1,z(this,o).pause=!z(this,o).isVisible,U(this,c,R).call(this)}),{threshold:[.1,.9]}).observe(this),z(this,a).current.usePause&&(this.addEventListener("mouseenter",(()=>{z(this,o).pause=!0,U(this,c,R).call(this)})),this.addEventListener("mouseleave",(()=>{z(this,o).pause=!1,U(this,c,R).call(this)})));const s=new IntersectionObserver((t=>{t.forEach((t=>{t.target.toggleAttribute("visible",t.isIntersecting),t.target.toggleAttribute("inert",!t.isIntersecting)}))}),{scroller:e,threshold:.6});t.forEach((t=>s.observe(t)))},C=function(){clearTimeout(this.resizeTm),this.resizeTm=setTimeout((()=>{U(this,c,k).call(this),U(this,c,y).call(this)}),100)},L=function(){if(z(this,s))return;U(this,c,S).call(this),this.newIndex=z(this,o).index;const t=U(this,c,P).call(this);t!==z(this,o).index&&(this.newIndex=t,U(this,c,A).call(this,t),U(this,c,M).call(this,"scrollupdate"))},S=function(){z(this,o).isMoving||U(this,c,M).call(this,"scrollstart"),z(this,o).isMoving=!0},T=function(){z(this,s)||(U(this,c,M).call(this,"scrollend"),V(this,e,!1),z(this,o).isMoving=!1,"number"==typeof this.newIndex?(U(this,c,A).call(this,this.newIndex),this.newIndex=null):U(this,c,A).call(this,z(this,o).index),U(this,c,R).call(this))},M=function(t){const{current:e}=z(this,a);this.dispatchEvent(new CustomEvent(t,{detail:z(this,o)})),e["on"+t]&&e["on"+t](this)},A=function(t){void 0!==t&&(z(this,o).index=t),U(this,c,W).call(this),z(this,e)||U(this,c,h).call(this,"updateState",t)},P=function(t){const{scroller:e,items:s}=z(this,r),{perPage:i,vertical:n}=z(this,a).current,l=U(this,c,H).call(this);let h=0;h=n?e.scrollTop:l?e.scrollLeft:e.scrollLeft+e.clientWidth;let d=s.map((t=>{let e=0;return e=n?t.offsetTop-(z(this,o).computedPadding||0)-h:(l?t.offsetLeft:t.offsetLeft+t.clientWidth)-(z(this,o).computedPadding||0)-h,{index:parseInt(t.dataset.index,10),distance:Math.abs(e)}})).reduce(((t,e)=>!t||e.distance<t.distance?e:t),null);return t?d:Math.ceil(d.index/i)},W=function(){const{sync:t}=z(this,a).current;t&&z(this,o).ready&&(z(this,r).sync=z(this,r).sync||Array.from(document.querySelectorAll(t)),z(this,r).sync.forEach((t=>{t instanceof F&&t.goTo(z(this,o).index)})))},I=function(t,e={fallback:!1}){const s=this.shadowRoot.querySelector(`[name="${t}"]`);let i=s.assignedElements();return e.fallback&&!i.length&&""===this.children[0].slot&&(this.children[0].slot="scroller",i=s.assignedElements()),Array.from(i.length?i:s.children)},j=function(t,e){const s=document.createElement("style");return s.id=e,s.append(document.createTextNode(t)),s},H=function(){return"rtl"!==document.firstElementChild.getAttribute("dir")},O=function(t){return"string"==typeof t?t:t+"px"},R=function(){if(!z(this,a).current.autoplay)return;const{pause:t,isVisible:e}=z(this,o);!t&&e?z(this,o).autoplayInterval||(z(this,o).autoplayInterval=setTimeout((()=>{z(this,o).autoplayInterval=null,this.goTo(z(this,o).index+1)}),z(this,a).current.autoplay)):(clearTimeout(z(this,o).autoplayInterval),z(this,o).autoplayInterval=null)};let _=F;function B(...t){return t.reduce(((t,e)=>e(t)),_)}const J=t=>{var e,s,i,n,o;return o=class extends t{constructor(){super(),q(this,s),q(this,e,{container:null,buttons:[]}),this.elements.controls=z(this,e),this.registerHook("init",U(this,s,i).bind(this)),this.registerHook("updateState",U(this,s,n).bind(this))}},e=new WeakMap,s=new WeakSet,i=function(){const{current:i}=this.settings,o=!i.controls||this.state.pageCount<2,r=this.getSlotElements("prev-buttons"),a=this.getSlotElements("next-buttons");if(z(this,e).container=this.shadowRoot.querySelector('[part="buttons"]'),!z(this,e).container)return;const{container:l,buttons:c}=z(this,e);t.setVisibility(l,!o),(r.length||a.length)&&(c.push(...r,...a),c.forEach((t=>{t.hasListener||(t.direction=t.getAttribute("direction")||"next",t.modifier=("next"===t.direction?1:-1)*(parseInt(t.getAttribute("modifier"),10)||1),t.hasListener=!0,t.addEventListener("click",(()=>{i.controls&&this.goTo(this.state.index+t.modifier)})))})),U(this,s,n).call(this))},n=function(){if(!z(this,e).buttons.length)return;const{loop:t}=this.settings.current,{index:s,pageCount:i}=this.state;let n=!1;if(z(this,e).buttons.forEach((e=>{const o=!t&&("next"===e.direction?s>=i-e.modifier:s<Math.abs(e.modifier));if(e===this.shadowRoot.activeElement&&o&&(n=!0),e.disabled=!!o,e.setAttribute("aria-disabled",!!o),o)e.removeAttribute("aria-controls");else{let t=s+e.modifier;t<0?t=i-1:t>=i&&(t=0);const n=this.state.pages[t];if(null==n?void 0:n.length){const t=n.map((t=>{var e;return null==(e=this.elements.items[t])?void 0:e.id})).filter(Boolean);t.length&&e.setAttribute("aria-controls",t.join(" "))}}})),n){const t=z(this,e).buttons.filter((t=>!t.disabled));t.length&&t[0].focus()}},o},Z=t=>{var e,s,i,n,o,r,a,l;return l=class extends t{constructor(){super(),q(this,i),q(this,e,{container:null,dots:[],active:null}),q(this,s,"button nav-button"),this.elements.pagination=z(this,e),this.registerHook("init",U(this,i,n).bind(this)),this.registerHook("updateState",U(this,i,r).bind(this))}},e=new WeakMap,s=new WeakMap,i=new WeakSet,n=function(){let{container:s,dots:n}=z(this,e);const{current:l}=this.settings;if(s)s.innerHTML="",n.forEach((t=>t.remove())),z(this,e).dots=[];else{if(s=this.getSlotElements("pagination")[0],!s)return;s.addEventListener("keydown",U(this,i,a).bind(this)),z(this,e).container=s}t.setVisibility(s,l.nav&&this.state.pageCount>1),l.nav&&s&&this.state.pageCount>1&&(this.state.pages.forEach(((t,e)=>{U(this,i,o).call(this,t,e)})),z(this,e).dots.length&&U(this,i,r).call(this))},o=function(t,i){const{container:n,dots:o}=z(this,e);if(!n)return;const r=document.createElement("button");r.type="button",r.part=z(this,s),r.setAttribute("aria-label",`Page ${i+1}`),r.setAttribute("aria-controls",t.map((t=>t.id)).join(" ")),r.setAttribute("aria-current",!1),r.innerHTML=i+1,r.addEventListener("click",(()=>this.goTo(i))),n.append(r),o.push(r)},r=function(){if(!this.settings.current.nav||!z(this,e).dots.length)return;let{dots:t,active:i}=z(this,e);const n=t[this.state.index];n&&(i&&(Object.assign(i,{tabIndex:0,ariaCurrent:!1}),i.part=z(this,s)),n.part=`${z(this,s)} active`,Object.assign(n,{tabIndex:-1,ariaCurrent:!0}),z(this,e).active=n)},a=function(t){if(!z(this,e).dots.length)return;const s=this.isDocumentLtr(),i=z(this,e).dots[this.state.index]||0;switch(t.key){case"ArrowRight":case"ArrowLeft":const e=i[`${"ArrowRight"===t.key?s?"next":"previous":s?"previous":"next"}ElementSibling`];e&&(e.click(),e.focus())}},l},G=t=>{var e,s,i,n,o;return o=class extends t{constructor(){super(),q(this,s),q(this,e,{container:null,current:null,sep:null,total:null}),this.elements.pager=z(this,e),this.registerHook("init",U(this,s,i).bind(this)),this.registerHook("updateState",U(this,s,n).bind(this))}},e=new WeakMap,s=new WeakSet,i=function(){const{current:s}=this.settings;if(!z(this,e).container){if(z(this,e).container=this.shadowRoot.querySelector('[part="pager"]'),!z(this,e).container)return;["current","sep","total"].forEach((t=>{const s=this.getSlotElements(t)[0];s&&(z(this,e)[t]=s)}))}if(!z(this,e).current||!z(this,e).total)return;const{container:i,current:n,total:o}=z(this,e);t.setVisibility(i,s.pager&&this.state.pageCount>1),n.innerHTML=1,o.innerHTML=this.state.pageCount},n=function(){this.settings.current.pager&&z(this,e).current&&(z(this,e).current.innerHTML=this.state.index+1)},o},K=B(J,Z,G),Q=B(Z),X=B(G),Y=B(J),tt=B(Z,J),et=B(Z,G),st=B(G,J);"customElements"in window&&("undefined"==typeof document&&"undefined"==typeof location?require("url").pathToFileURL(__filename).href:"undefined"==typeof document?location.href:D&&"SCRIPT"===D.tagName.toUpperCase()&&D.src||new URL("snap-carousel.umd.min.js",document.baseURI).href).endsWith("snap-carousel.js")&&_.registerElement("snap-carousel",K),t.BaseCarousel=_,t.ControlsFeature=J,t.NavFeature=Z,t.PagerFeature=G,t.SnapCarousel=K,t.SnapCarouselControls=Y,t.SnapCarouselNav=Q,t.SnapCarouselNavControls=tt,t.SnapCarouselNavPager=et,t.SnapCarouselPager=X,t.SnapCarouselPagerControls=st,t.createCarousel=B,t.default=K,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})),"undefined"!=typeof window&&window.addEventListener("DOMContentLoaded",(function(){customElements.get("snap-carousel")||customElements.define("snap-carousel",SnapCarousel.default)}));
