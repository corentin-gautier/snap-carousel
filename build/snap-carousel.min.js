const t=document;if(!("onscrollend"in window)){const n=new Event("scrollend"),r=new Set;t.addEventListener("touchstart",(t=>{for(let s of t.changedTouches)r.add(s.identifier)}),{passive:!0}),t.addEventListener("touchend",(t=>{for(let s of t.changedTouches)r.delete(s.identifier)}),{passive:!0});let l=new WeakMap;function s(t,s,e){let i=t[s];t[s]=function(){let t=Array.prototype.slice.apply(arguments,[0]);i.apply(this,t),t.unshift(i),e.apply(this,t)}}function e(t,s,e,i){if("scroll"!=s&&"scrollend"!=s)return;let o=this,a=l.get(o);if(void 0===a){let s=0;a={scrollListener:t=>{clearTimeout(s),s=setTimeout((()=>{r.size?setTimeout(a.scrollListener,100):(o.dispatchEvent(n),s=0)}),100)},listeners:0},t.apply(o,["scroll",a.scrollListener]),l.set(o,a)}a.listeners++}function i(t,s,e){if("scroll"!=s&&"scrollend"!=s)return;let i=this,o=l.get(i);void 0!==o&&(o[s]--,--o.listeners>0||(t.apply(i,["scroll",o.scrollListener]),l.delete(i)))}s(Element.prototype,"addEventListener",e),s(window,"addEventListener",e),s(document,"addEventListener",e),s(Element.prototype,"removeEventListener",i),s(window,"removeEventListener",i),s(document,"removeEventListener",i)}class o extends HTMLElement{static get className(){return"snp-c"}static get t(){return'<slot name="controls"><div slot="controls" part="controls"><slot name="prev-buttons"><button part="button control-button" type="button" direction="prev" aria-label="Previous">Previous</button></slot><slot name="next-buttons"><button part="button control-button" type="button" aria-label="Next">Next</button></slot></div></slot><slot name="scroller"><ul></ul></slot><slot name="pagination"><nav part="nav"></nav></slot>'}static get i(){return{displayed:1,perPage:1,gap:0,padding:0,controls:!1,nav:!1,loop:!1,clone:!1,debug:!1,behavior:"smooth",stop:!1,responsive:[]}}static get o(){return Object.keys(o.i)}constructor(){super();const s=t.createElement("template");s.innerHTML="<style>:host{display:block;position:relative;width:100%}:host(:not([scrollbar])) ::slotted([slot=scroller]){scrollbar-width:none}:host(:not([scrollbar])) ::slotted([slot=scroller])::-webkit-scrollbar{display:none}::slotted([slot=scroller]){display:flex;gap:var(--sc-gap);margin:0;overflow-x:auto;overscroll-behavior-x:contain;padding:0 var(--sc-padding)!important;position:relative;scroll-behavior:var(--sc-behavior);scroll-padding-inline:var(--sc-padding);scroll-snap-type:x mandatory;touch-action:pan-y}</style>"+o.t,this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(s.content.cloneNode(!0));const e=this.l("scroller")[0];if(!e)return;const i=Array.from(e.children);e.onscroll=this.h.bind(this),e.addEventListener("scrollend",this.u.bind(this)),addEventListener("resize",this.p.bind(this)),this.g={scroller:e,items:i,controls:{container:null,buttons:[]},pagination:{container:null,dots:[],active:null}},this.v={origin:{},current:{}},this.m={index:0,itemsCount:i.length,pageCount:0,breakpoint:void 0},this.setAttribute("aria-label","carousel"),this.setAttribute("aria-roledescription","carousel"),e.role="group",e.setAttribute("aria-label","scroller"),e.setAttribute("aria-live","Polite"),i.forEach(((t,s)=>{t.dataset.index=s,t.setAttribute("aria-label",s+1+" of "+i.length),t.setAttribute("aria-roledescription","item")})),this._(),this.C(),this.$(),this.k()}_(){const s=`${o.className}-global-styles`;if(t.querySelector("#"+s))return;t.head.append(this.P("snap-carousel:not([scrollbar]) .snp-c__scroller::-webkit-scrollbar{display:none}.snp-c__scroller{display:flex}.snp-c__scroller>*{display:block;flex:0 0 auto;width:calc(100%/var(--sc-perpage, 1) - var(--sc-gap, 0) + var(--sc-gap, 0)/var(--sc-perpage, 1))}",s))}C(){const{scroller:t}=this.g;this.m.id=o.className+"-"+(Math.random()+1).toString(36).substring(4),this.id=this.m.id,t.id=this.m.id+"__scroller",t.classList.add(this.L("scroller",!1))}M(){this.m.breakpoint=void 0,this.v.origin=Object.assign({},o.i,this.S()),this.v.origin.responsive=(this.v.origin.responsive||[]).sort(((t,s)=>t.breakpoint-s.breakpoint)),this.A()}k(){this.g.scroller.clientWidth?this.M():requestAnimationFrame((()=>{this.k()}))}S(){const t=o.o;return this.attributes.options?this.I(this.attributes.options.value):Array.from(this.attributes).reduce(((s,e)=>{const i=e.name.replace(/-([a-z])/g,(t=>t[1].toUpperCase()));return t.includes(i)&&(s[i]=this.I(e.value)),s}),{})}I(t){let s;if(""===t)return!0;try{s=JSON.parse(t)}catch(s){return t}return s}A(){let t={breakpoint:null};const{items:s}=this.g;let{origin:e,current:i}=this.v;e.responsive.forEach((s=>{s.breakpoint<window.innerWidth&&(t=s)})),i=Object.assign({},e,t.config||{});let{displayed:o,perPage:n,loop:r}=i;n=r?o:Math.min(o,n),i=Object.assign(i,{perPage:n,loop:!!r&&(s.length%n==0&&s.length>=3*o)}),this.v.current=i,this.m.breakpoint!==t.breakpoint&&(this.m.breakpoint=t.breakpoint,this.T())}T(){this.O(),this.q(),this.F(),this.N(),this.j(),this.D(0),this.K()}j(){this.m.computedPadding=parseInt(getComputedStyle(this.g.scroller)["padding-left"],"10")}O(){const{current:t}=this.v,{itemsCount:s}=this.m,e=Math.floor((t.displayed-t.perPage)/t.perPage);this.m.pageCount=Math.ceil(s/t.perPage)-e}q(){const s=t.querySelector("#"+this.m.id+"-styles");s&&s.remove();const{displayed:e,gap:i,padding:o,perPage:n,stop:r,behavior:l}=this.v.current,a=n>1?`*:nth-child(${n}n + 1)`:"*",h=`#${this.m.id} { --sc-perpage: ${e}; --sc-gap: ${this.R(i)}; --sc-padding: ${this.R(o)}; --sc-behavior: ${l}; } #${this.m.id}__scroller > ${a} { scroll-snap-align: start; scroll-snap-stop: ${r?"always":"normal"} }`;this.styles=this.P(h,this.m.id+"-styles"),t.body.append(this.styles)}$(){const{items:t,scroller:s}=this.g,e=new IntersectionObserver((t=>{t.forEach((t=>{t.target.toggleAttribute("visible",t.isIntersecting),t.target.toggleAttribute("inert",!t.isIntersecting)}))}),{scroller:s,threshold:.6});t.forEach((t=>e.observe(t)));new MutationObserver((t=>{console.log(t),t.forEach((t=>{"attributes"===t.type&&o.o.includes(t.attributeName)&&this.M(),"childList"===t.type&&console.log(t)}))})).observe(this,{attributes:!0,childList:!0})}p(){clearTimeout(this.resizeTm),this.resizeTm=setTimeout((()=>{this.j(),this.A()}),100)}h(){if(this.m.preventNextEvent)return;if(this.W(),this.newIndex=this.m.index,this.m.preventScrollEvents)return;const t=this.B();t!=this.m.index&&(this.newIndex=t,this.D(t),this.G("scrollupdate"))}G(t,s="cornflowerblue",e="#FFF"){const{current:i}=this.v,o="font-weight: bold;padding: 3px 8px",n="background: aliceblue; color: cornflowerblue;";i.debug&&console.log(`%cEvent%c${t}%c#${this.id}]`,n+o,`background: ${s}; color: ${e};font-weight: bold;padding: 3px 8px`,n+o),this.dispatchEvent(new CustomEvent(t,{detail:this.m})),i["on"+t]&&i["on"+t](this)}W(){this.m.isMoving||this.G("scrollstart"),this.m.isMoving=!0}u(){this.m.preventNextEvent||(this.G("scrollend"),this.m.preventScrollEvents=!1,this.m.isMoving=!1,"number"==typeof this.newIndex?(this.D(this.newIndex),this.newIndex=null):this.D(this.m.index),this.K())}D(t){this.m.index=t,this.H(),this.J(),this.V()}B(t){const{scroller:s,items:e}=this.g,{perPage:i}=this.v.current,o=this.U(),n=o?s.scrollLeft:s.scrollLeft+s.clientWidth;let r=e.map((t=>({index:parseInt(t.dataset.index,10),distance:Math.abs((o?t.offsetLeft:t.offsetLeft+t.clientWidth)-(this.m.computedPadding||0)-n)}))).reduce(((t,s)=>!t||s.distance<t.distance?s:t),null);return t?r:Math.ceil(r.index/i)}goTo(t){const{scroller:s,items:e}=this.g,{perPage:i}=this.v.current,o=t>this.m.pageCount-1?0:t<0?this.m.pageCount-1:t,n=e[o*i];this.D(o),this.m.ready=!0;const r=this.U()?n.offsetLeft:n.offsetLeft+n.offsetWidth-s.offsetWidth;this.m.preventScrollEvents=!0,requestIdleCallback((()=>{s.scrollTo({left:r})}),{timeout:100})}K(){const{perPage:t,clone:s}=this.v.current,e=this.m.index,i=this.m.itemsCount-1;if(!s)return;const{scroller:o,items:n}=this.g;if(this.B(!0).distance>1)return;this.m.preventNextEvent=!0;const r=e*t;let l=n[r],a=n[r+t-1];const h=Math.floor(this.m.pageCount/2);for(let s=0;s<h;s++)for(let s=0;s<t;s++)l.previousElementSibling||(this.G("clonebefore","bisque","chocolate"),o.prepend(o.children[i]),l=o.children[0]),a.nextElementSibling||(this.G("cloneafter","bisque","chocolate"),o.append(o.children[0]),a=o.children[i]);setTimeout((()=>{requestIdleCallback((()=>{this.m.preventNextEvent=!1}),{timeout:200})}),200)}F(){const{pagination:t}=this.g;let{container:s,dots:e}=t,{current:i}=this.v;if(s?(s.innerHTML=null,e.forEach((t=>t.remove())),this.g.pagination.dots=[]):(s=this.l("pagination")[0],s.addEventListener("keydown",this.X.bind(this)),t.container=s),s.style.display=i.nav&&this.m.pageCount>1?"":"none",i.nav&&s)for(let t=0;t<this.m.pageCount;t++)this.Y(t)}Y(s){const{items:e,pagination:i}=this.g,{container:o,dots:n}=i,r=t.createElement("button");r.innerHTML=s+1,r.addEventListener("click",(()=>this.goTo(s))),r.type="button",r.part="button nav-button",r.role="tab",r.setAttribute("tabindex",-1),r.setAttribute("aria-setsize",e.length),r.setAttribute("aria-posinset",s),r.setAttribute("aria-controls",`carousel-item-${s}`),o.append(r),n.push(r)}X(t){const s=this.U(),e=this.g.pagination.dots[this.m.index]||0;switch(t.key){case"ArrowRight":case"ArrowLeft":const i=e[`${"ArrowRight"===t.key?s?"next":"previous":s?"previous":"next"}ElementSibling`];i&&(i.click(),i.focus())}}N(){const{controls:t}=this.g,s=!this.v.current.controls||this.m.pageCount<2;t.container=this.l("controls")[0],t.buttons=[...this.l("prev-buttons"),...this.l("next-buttons")],t.buttons.forEach((t=>{t.style=s?"display: none !important;":"",t.hasListener||(t.direction=t.getAttribute("direction")||"next",t.modifier=("next"===t.direction?1:-1)*(parseInt(t.getAttribute("modifier"),10)||1),t.hasListener=!0,t.addEventListener("click",(()=>{this.v.current.controls&&this.goTo(this.m.index+t.modifier)})))}))}l(t){const s=this.shadowRoot.querySelector([`[name="${t}"]`]),e=s.assignedElements();return Array.from(e.length?e:s.children)}J(){const{pagination:t}=this.g;let{dots:s,active:e}=t;if(!this.v.current.nav)return;const i=s[this.m.index];i&&(e&&(e.setAttribute("tabindex",-1),e.setAttribute("aria-selected",!1),e.part="button nav-button"),i.part="button nav-button active",i.setAttribute("tabindex",0),i.setAttribute("aria-selected",!0),t.active=i)}V(){const{loop:t}=this.v.current,{buttons:s}=this.g.controls,{index:e,pageCount:i}=this.m;let o=!1;if(s.forEach((s=>{const n=!t&&("next"===s.direction?e>=i-s.modifier:e<Math.abs(s.modifier));s===this.shadowRoot.activeElement&&n&&(o=!0),s.disabled=n?"disabled":""})),o){const t=s.filter((t=>!t.disabled));t.length&&t[0].focus()}}H(){const{sync:s}=this.v.current;s&&this.m.ready&&(this.g.sync=this.g.sync||t.querySelectorAll(s)||[],this.g.sync.forEach((t=>{t instanceof o&&t.goTo(this.m.index)})))}P(s,e){const i=t.createElement("style");return i.id=e,i.type="text/css",i.append(t.createTextNode(s)),i}L(t,s=!0){return(s?".":"")+o.className+"__"+t}U(){return"rtl"!==t.firstElementChild.getAttribute("dir")}R(t){return"string"==typeof t?t:t+"px"}getInfos(){return{elements:this.g,config:this.v,state:this.m}}}window.customElements&&customElements.define("snap-carousel",o);
