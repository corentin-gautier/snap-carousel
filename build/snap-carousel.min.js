((t,s,e,i,n,o,r,l,a)=>{if(!("onscrollend"in t)){const d=new Event("scrollend"),b=new Set;s.addEventListener("touchstart",(t=>{for(let s of t.changedTouches)b.add(s.identifier)}),{passive:!0}),s.addEventListener("touchend",(t=>{for(let s of t.changedTouches)b.delete(s.identifier)}),{passive:!0});let v=new WeakMap;function h(t,s,i){let n=t[s];t[s]=function(){let t=e.prototype.slice.apply(arguments,[0]);n.apply(this,t),t.unshift(n),i.apply(this,t)}}function c(t,s,e,i){if("scroll"!=s&&"scrollend"!=s)return;let n=this,o=v.get(n);if(void 0===o){let s=0;o={scrollListener:t=>{l(s),s=a((()=>{b.size?a(o.scrollListener,100):(n.dispatchEvent(d),s=0)}),100)},listeners:0},t.apply(n,["scroll",o.scrollListener]),v.set(n,o)}o.listeners++}function p(t,s,e){if("scroll"!=s&&"scrollend"!=s)return;let i=this,n=v.get(i);void 0!==n&&(n[s]--,--n.listeners>0||(t.apply(i,["scroll",n.scrollListener]),v.delete(i)))}h(n.prototype,"addEventListener",c),h(t,"addEventListener",c),h(s,"addEventListener",c),h(n.prototype,"removeEventListener",p),h(t,"removeEventListener",p),h(s,"removeEventListener",p)}class u extends HTMLElement{#t;#s;#e={controls:{buttons:[]},pagination:{container:null,dots:[],active:null},pager:{container:null,current:null,sep:null,total:null}};#i={default:{autoplay:0,displayed:1,perPage:1,gap:0,padding:0,controls:!1,nav:!1,pager:!1,loop:!1,clone:!1,debug:!1,behavior:"smooth",stop:!1,usePause:!0,responsive:[]},origin:{},current:{}};#n={index:0,itemsCount:0,pageCount:0,isVisible:!1,autoplayInterval:null,breakpoint:void 0};#o="snp-c";constructor(){super()}connectedCallback(){const n=s.createElement("template");n.innerHTML='<style>:host{display:block;position:relative;width:100%}:host(:not([scrollbar])) ::slotted([slot=scroller]){scrollbar-width:none}:host(:not([scrollbar])) ::slotted([slot=scroller])::-webkit-scrollbar{display:none}::slotted([slot=scroller]){display:flex;gap:var(--sc-gap);margin:0;overflow-x:auto;overscroll-behavior-x:contain;padding:0 var(--sc-padding)!important;position:relative;scroll-behavior:var(--sc-behavior);scroll-padding-inline:var(--sc-padding);scroll-snap-type:x mandatory}</style><slot name="scroller"><ul></ul></slot><div part="controls"><div part="buttons"><slot name="prev-buttons"><button part="button control-button" type="button" direction="prev" aria-label="Previous">Previous</button></slot><slot name="next-buttons"><button part="button control-button" type="button" aria-label="Next">Next</button></slot></div><slot name="pagination"><div part="nav"></div></slot><div part="pager"><slot name="current"><span part="current"></span></slot><slot name="sep"><span part="page-sep">&nbsp;/&nbsp;</span></slot><slot name="total"><span part="total"></span></slot></div></div>',this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(n.content.cloneNode(!0));const o=this.#r("scroller")[0];if(!o)return;const r=e.from(o.children),l=r.length;o.onscroll=this.#l.bind(this),o.addEventListener("scrollend",this.#a.bind(this)),t.addEventListener("resize",this.#h.bind(this)),this.#e={...this.#e,scroller:o,items:r},this.#n.itemsCount=l,this.elements=this.#e,this.settings=this.#i,this.state=this.#n,this.ariaRoleDescription="carousel",i.assign(o,{role:"group",ariaLive:"polite",ariaAtomic:!1}),r.forEach(((t,s)=>{t.dataset.index=s,i.assign(t,{ariaSetSize:l,ariaPosInSet:s+1,ariaRoleDescription:"slide",role:"listitem"})})),this.#c(),this.#p(),this.#u(),this.#d()}goTo(t){this.#t=!1;const{scroller:s,items:e}=this.#e,{perPage:i}=this.#i.current,n=t>this.#n.pageCount-1?0:t<0?this.#n.pageCount-1:t,o=e[n*i];this.#b(n),this.#n.ready=!0;const r=this.#v()?o.offsetLeft:o.offsetLeft+o.offsetWidth-s.offsetWidth;this.#t=!0,requestIdleCallback((()=>{s.scrollTo({left:r})}),{timeout:100})}prev(){this.goTo(this.state.index-1)}next(){this.goTo(this.state.index+1)}#c(){const t=`${this.#o}-global-styles`;if(s.querySelector("#"+t))return;s.head.append(this.#g("snap-carousel:not([scrollbar]) .snp-c__scroller::-webkit-scrollbar{display:none}.snp-c__scroller{display:flex}.snp-c__scroller>*{display:block;flex:0 0 auto;max-width:100%;width:calc(100%/var(--sc-perpage, 1) - var(--sc-gap, 0) + var(--sc-gap, 0)/var(--sc-perpage, 1))}",t))}#p(){const{scroller:t}=this.#e,s="__scroller";this.id=this.#n.id=this.#o+"-"+(Math.random()+1).toString(36).substring(4),t.id=this.#n.id+s,t.classList.add(this.#o+s)}#u(){this.#n.breakpoint=void 0,this.#i.origin=i.assign({},this.#i.default,this.#m()),this.#i.origin.responsive=(this.#i.origin.responsive||[]).sort(((t,s)=>t.breakpoint-s.breakpoint)),this.#f()}#y(t){this.#e.scroller.clientWidth?t():r((()=>{this.#y()}))}#m(){const t=i.keys(this.#i.default);return this.attributes.options?this.#x(this.attributes.options.value):e.from(this.attributes).reduce(((s,e)=>{const i=e.name.replace("data-","").replace(/-([a-z])/g,(t=>t[1].toUpperCase()));return t.includes(i)&&(s[i]=this.#x(e.value)),s}),{})}#x(t){let s;if(""===t)return!0;try{s=JSON.parse(t)}catch(s){return t}return s}#f(){let s={breakpoint:null};const{items:e}=this.#e;let{origin:n,current:o}=this.#i;n.responsive.forEach((e=>{e.breakpoint<t.innerWidth&&(s=e)})),o=i.assign({},n,s.config||{});let{displayed:r,perPage:l,loop:a}=o;l=a?r:Math.min(r,l),o=i.assign(o,{perPage:l,loop:!!a&&(e.length%l==0&&e.length>=3*r)}),this.#i.current=o,this.#n.breakpoint!==s.breakpoint&&(this.#n.breakpoint=s.breakpoint,this.#w())}#w(){this.#y((()=>{this.#P(),this.#C(),this.#E(),this.#S(),this.#$(),this.#k(),this.#b(0),this.#L()}))}#k(){this.#n.computedPadding=parseInt(getComputedStyle(this.#e.scroller)["padding-left"],10)}#P(){const{current:t}=this.#i,{itemsCount:s}=this.#n,e=Math.floor((t.displayed-t.perPage)/t.perPage);this.#n.pageCount=Math.ceil(s/t.perPage)-e}#C(){const t=s.querySelector("#"+this.#n.id+"-styles");t&&t.remove();const{displayed:e,gap:i,padding:n,perPage:o,stop:r,behavior:l}=this.#i.current,a=o>1?`*:nth-child(${o}n + 1)`:"*",h=`#${this.#n.id} { --sc-perpage: ${e}; --sc-gap: ${this.#M(i)}; --sc-padding: ${this.#M(n)}; --sc-behavior: ${l}; } #${this.#n.id}__scroller > ${a} { scroll-snap-align: start; scroll-snap-stop: ${r?"always":"normal"} }`;this.styles=this.#g(h,this.#n.id+"-styles"),s.body.append(this.styles)}#d(){const{items:t,scroller:s}=this.#e,e=i.keys(this.#i.default);new o((t=>{let s=t[0];this.#n.isVisible=s.intersectionRatio>.1,this.#n.pause=!this.#n.isVisible,this.#I()}),{threshold:[.1,.9]}).observe(this),this.#i.current.usePause&&(this.addEventListener("mouseenter",(()=>{this.#n.pause=!0,this.#I()})),this.addEventListener("mouseleave",(()=>{this.#n.pause=!1,this.#I()})));const n=new o((t=>{t.forEach((t=>{t.target.toggleAttribute("visible",t.isIntersecting),t.target.toggleAttribute("inert",!t.isIntersecting)}))}),{scroller:s,threshold:.6});t.forEach((t=>n.observe(t)));new MutationObserver((t=>{t.forEach((t=>{"attributes"===t.type&&e.includes(t.attributeName.replace("data-",""))&&this.#u(),"childList"===t.type&&console.log(t)}))})).observe(this,{attributes:!0,childList:!0})}#h(){l(this.resizeTm),this.resizeTm=a((()=>{this.#k(),this.#f()}),100)}#l(){if(this.#s)return;this.#_(),this.newIndex=this.#n.index;const t=this.#A();t!=this.#n.index&&(this.newIndex=t,this.#b(t),this.#N("scrollupdate"))}#N(t,s,e){const{current:i}=this.#i;this.#T("Event",t,s,e),this.dispatchEvent(new CustomEvent(t,{detail:this.#n})),i["on"+t]&&i["on"+t](this)}#_(){this.#n.isMoving||this.#N("scrollstart"),this.#n.isMoving=!0}#a(){this.#s||(this.#N("scrollend"),this.#t=!1,this.#n.isMoving=!1,"number"==typeof this.newIndex?(this.#b(this.newIndex),this.newIndex=null):this.#b(this.#n.index),this.#L(),this.#I())}#b(t){this.#n.index=t,this.#q(),this.#t||(this.#z(),this.#F()),this.#O()}#A(t){const{scroller:s,items:e}=this.#e,{perPage:i}=this.#i.current,n=this.#v(),o=n?s.scrollLeft:s.scrollLeft+s.clientWidth;let r=e.map((t=>({index:parseInt(t.dataset.index,10),distance:Math.abs((n?t.offsetLeft:t.offsetLeft+t.clientWidth)-(this.#n.computedPadding||0)-o)}))).reduce(((t,s)=>!t||s.distance<t.distance?s:t),null);return t?r:Math.ceil(r.index/i)}#L(){const{perPage:t,clone:s}=this.#i.current,e=this.#n.index,i=this.#n.itemsCount-1;if(!s)return;const{scroller:n,items:o}=this.#e;if(this.#A(!0).distance>1)return;this.#s=!0;const r=e*t;let l=o[r],h=o[r+t-1];const c=Math.floor(this.#n.pageCount/2);for(let s=0;s<c;s++)for(let s=0;s<t;s++)l.previousElementSibling||(this.#N("clonebefore","bisque","chocolate"),n.prepend(n.children[i]),l=n.children[0]),h.nextElementSibling||(this.#N("cloneafter","bisque","chocolate"),n.append(n.children[0]),h=n.children[i]);a((()=>{requestIdleCallback((()=>{this.#s=!1}),{timeout:200})}),200)}#E(){const{pagination:t}=this.#e;let{container:s,dots:e}=t,{current:i}=this.#i;if(s?(s.innerHTML=null,e.forEach((t=>t.remove())),this.#e.pagination.dots=[]):(s=this.#r("pagination")[0],s.addEventListener("keydown",this.#R.bind(this)),t.container=s),s.style.display=i.nav&&this.#n.pageCount>1?"":"none",i.nav&&s)for(let t=0;t<this.#n.pageCount;t++)this.#D(t)}#S(){const{pager:t}=this.#e,{current:s}=this.#i;t.current||(["current","sep","total"].forEach((s=>{t[s]=this.#r(s)[0]})),t.container=this.shadowRoot.querySelector('[part="pager"]')),t.container.style.display=s.pager&&this.#n.pageCount>1?"":"none",t.current.innerHTML=1,t.total.innerHTML=this.#n.pageCount}#D(t){const{pagination:e}=this.#e,{container:n,dots:o}=e,r=s.createElement("button");r.innerHTML=t+1,r.addEventListener("click",(()=>this.goTo(t))),i.assign(r,{type:"button",part:"button nav-button",ariaControls:this.#e.scroller.id,ariaSelected:!1}),n.append(r),o.push(r)}#R(t){const s=this.#v(),e=this.#e.pagination.dots[this.#n.index]||0;switch(t.key){case"ArrowRight":case"ArrowLeft":const i=e[`${"ArrowRight"===t.key?s?"next":"previous":s?"previous":"next"}ElementSibling`];i&&(i.click(),i.focus())}}#$(){const{controls:t}=this.#e,{current:s}=this.#i,e=!s.controls||this.#n.pageCount<2;t.buttons=[...this.#r("prev-buttons"),...this.#r("next-buttons")],t.buttons.forEach((t=>{t.style=e?"display: none !important;":"",t.hasListener||(t.direction=t.getAttribute("direction")||"next",t.modifier=("next"===t.direction?1:-1)*(parseInt(t.getAttribute("modifier"),10)||1),t.hasListener=!0,t.addEventListener("click",(()=>{s.controls&&this.goTo(this.#n.index+t.modifier)})),i.assign(t,{ariaControls:this.#e.scroller.id}))}))}#r(t){const s=this.shadowRoot.querySelector([`[name="${t}"]`]),i=s.assignedElements();return e.from(i.length?i:s.children)}#z(){if(!this.#i.current.nav)return;const{pagination:t}=this.#e;let{dots:s,active:e}=t;const n=s[this.#n.index];n&&(e&&(i.assign(e,{tabIndex:0,ariaSelected:!1}),e.part="button nav-button"),n.part="button nav-button active",i.assign(n,{tabIndex:-1,ariaSelected:!0}),t.active=n)}#F(){this.#i.current.pager&&(this.#e.pager.current.innerHTML=this.#n.index+1)}#O(){const{loop:t}=this.#i.current,{buttons:s}=this.#e.controls,{index:e,pageCount:i}=this.#n;let n=!1;if(s.forEach((s=>{const o=!t&&("next"===s.direction?e>=i-s.modifier:e<Math.abs(s.modifier));s===this.shadowRoot.activeElement&&o&&(n=!0),s.disabled=o?"disabled":""})),n){const t=s.filter((t=>!t.disabled));t.length&&t[0].focus()}}#q(){const{sync:t}=this.#i.current;t&&this.#n.ready&&(this.#e.sync=this.#e.sync||s.querySelectorAll(t)||[],this.#e.sync.forEach((t=>{t instanceof u&&t.goTo(this.#n.index)})))}#g(t,e){const i=s.createElement("style");return i.id=e,i.type="text/css",i.append(s.createTextNode(t)),i}#v(){return"rtl"!==s.firstElementChild.getAttribute("dir")}#M(t){return"string"==typeof t?t:t+"px"}#I(){if(!this.#i.current.autoplay)return;const{pause:t,isVisible:s}=this.#n;!t&&s?this.#n.autoplayInterval||(this.#n.autoplayInterval=a((()=>{this.#n.autoplayInterval=null,this.goTo(this.#n.index+1)}),this.#i.current.autoplay),this.#T("Play/Pause","Set Timeout")):(l(this.#n.autoplayInterval),this.#n.autoplayInterval=null,this.#T("Play/Pause","Remove Timeout"))}#T(t,s,e="cornflowerblue",i="#FFF"){const n="font-weight: bold;padding: 3px 8px",o="background: aliceblue; color: cornflowerblue;";this.#i.current.debug&&console.log(`%c${t}%c${s}%c#${this.id}]`,o+n,`background: ${e}; color: ${i};font-weight: bold;padding: 3px 8px`,o+n)}}t.customElements&&customElements.define("snap-carousel",u)})(window,document,Array,Object,Element,IntersectionObserver,requestAnimationFrame,clearTimeout,setTimeout);
