((t,s,e,i,n,o,r,l,a)=>{if(!("onscrollend"in t)){const d=new Event("scrollend"),b=new Set;s.addEventListener("touchstart",(t=>{for(let s of t.changedTouches)b.add(s.identifier)}),{passive:!0}),s.addEventListener("touchend",(t=>{for(let s of t.changedTouches)b.delete(s.identifier)}),{passive:!0});let g=new WeakMap;function h(t,s,i){let n=t[s];t[s]=function(){let t=e.prototype.slice.apply(arguments,[0]);n.apply(this,t),t.unshift(n),i.apply(this,t)}}function c(t,s,e,i){if("scroll"!=s&&"scrollend"!=s)return;let n=this,o=g.get(n);if(void 0===o){let s=0;o={scrollListener:t=>{l(s),s=a((()=>{b.size?a(o.scrollListener,100):(n.dispatchEvent(d),s=0)}),100)},listeners:0},t.apply(n,["scroll",o.scrollListener]),g.set(n,o)}o.listeners++}function u(t,s,e){if("scroll"!=s&&"scrollend"!=s)return;let i=this,n=g.get(i);void 0!==n&&(n[s]--,--n.listeners>0||(t.apply(i,["scroll",n.scrollListener]),g.delete(i)))}h(n.prototype,"addEventListener",c),h(t,"addEventListener",c),h(s,"addEventListener",c),h(n.prototype,"removeEventListener",u),h(t,"removeEventListener",u),h(s,"removeEventListener",u)}class p extends HTMLElement{#t={controls:{buttons:[]},pagination:{container:null,dots:[],active:null},pager:{container:null,current:null,sep:null,total:null}};#s={default:{autoplay:0,displayed:1,perPage:1,gap:0,padding:0,controls:!1,nav:!1,pager:!1,loop:!1,clone:!1,debug:!1,behavior:"smooth",stop:!1,usePause:!0,responsive:[]},origin:{},current:{}};#e={index:0,itemsCount:0,pageCount:0,isVisible:!1,autoplayInterval:null,breakpoint:void 0};#i="snp-c";constructor(){super()}connectedCallback(){const n=s.createElement("template");n.innerHTML='<style>:host{display:block;position:relative;width:100%}:host(:not([scrollbar])) ::slotted([slot=scroller]){scrollbar-width:none}:host(:not([scrollbar])) ::slotted([slot=scroller])::-webkit-scrollbar{display:none}::slotted([slot=scroller]){display:flex;gap:var(--sc-gap);margin:0;overflow-x:auto;overscroll-behavior-x:contain;padding:0 var(--sc-padding)!important;position:relative;scroll-behavior:var(--sc-behavior);scroll-padding-inline:var(--sc-padding);scroll-snap-type:x mandatory}</style><slot name="scroller"><ul></ul></slot><div part="controls"><div part="buttons"><slot name="prev-buttons"><button part="button control-button" type="button" direction="prev" aria-label="Previous">Previous</button></slot><slot name="next-buttons"><button part="button control-button" type="button" aria-label="Next">Next</button></slot></div><slot name="pagination"><div part="nav"></div></slot><div part="pager"><slot name="current"><span part="current"></span></slot><slot name="sep"><span part="page-sep">&nbsp;/&nbsp;</span></slot><slot name="total"><span part="total"></span></slot></div></div>',this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(n.content.cloneNode(!0));const o=this.#n("scroller")[0];if(!o)return;const r=e.from(o.children),l=r.length;o.onscroll=this.#o.bind(this),o.addEventListener("scrollend",this.#r.bind(this)),t.addEventListener("resize",this.#l.bind(this)),this.#t.scroller=o,this.#t.items=r,this.#e.itemsCount=l,this.elements=this.#t,this.settings=this.#s,this.state=this.#e,this.ariaRoleDescription="carousel",i.assign(o,{role:"group",ariaLive:"polite",ariaAtomic:!1}),r.forEach(((t,s)=>{t.dataset.index=s,i.assign(t,{ariaSetSize:l,ariaPosInSet:s+1,ariaRoleDescription:"slide",role:"listitem"})})),this.#a(),this.#h(),this.#c(),this.#u()}goTo(t){const{scroller:s,items:e}=this.#t,{perPage:i}=this.#s.current,n=t>this.#e.pageCount-1?0:t<0?this.#e.pageCount-1:t,o=e[n*i];this.#p(n),this.#e.ready=!0;const r=this.#d()?o.offsetLeft:o.offsetLeft+o.offsetWidth-s.offsetWidth;this.#e.preventScrollEvents=!0,requestIdleCallback((()=>{s.scrollTo({left:r})}),{timeout:100})}prev(){this.goTo(this.state.index-1)}next(){this.goTo(this.state.index+1)}#a(){const t=`${this.#i}-global-styles`;if(s.querySelector("#"+t))return;s.head.append(this.#b("snap-carousel:not([scrollbar]) .snp-c__scroller::-webkit-scrollbar{display:none}.snp-c__scroller{display:flex}.snp-c__scroller>*{display:block;flex:0 0 auto;max-width:100%;width:calc(100%/var(--sc-perpage, 1) - var(--sc-gap, 0) + var(--sc-gap, 0)/var(--sc-perpage, 1))}",t))}#h(){const{scroller:t}=this.#t,s="__scroller";this.id=this.#e.id=this.#i+"-"+(Math.random()+1).toString(36).substring(4),t.id=this.#e.id+s,t.classList.add(this.#i+s)}#c(){this.#e.breakpoint=void 0,this.#s.origin=i.assign({},this.#s.default,this.#g()),this.#s.origin.responsive=(this.#s.origin.responsive||[]).sort(((t,s)=>t.breakpoint-s.breakpoint)),this.#v()}#m(t){this.#t.scroller.clientWidth?t():r((()=>{this.#m()}))}#g(){const t=i.keys(this.#s.default);return this.attributes.options?this.#f(this.attributes.options.value):e.from(this.attributes).reduce(((s,e)=>{const i=e.name.replace("data-","").replace(/-([a-z])/g,(t=>t[1].toUpperCase()));return t.includes(i)&&(s[i]=this.#f(e.value)),s}),{})}#f(t){let s;if(""===t)return!0;try{s=JSON.parse(t)}catch(s){return t}return s}#v(){let s={breakpoint:null};const{items:e}=this.#t;let{origin:n,current:o}=this.#s;n.responsive.forEach((e=>{e.breakpoint<t.innerWidth&&(s=e)})),o=i.assign({},n,s.config||{});let{displayed:r,perPage:l,loop:a}=o;l=a?r:Math.min(r,l),o=i.assign(o,{perPage:l,loop:!!a&&(e.length%l==0&&e.length>=3*r)}),this.#s.current=o,this.#e.breakpoint!==s.breakpoint&&(this.#e.breakpoint=s.breakpoint,this.#y())}#y(){this.#m((()=>{this.#x(),this.#w(),this.#P(),this.#C(),this.#E(),this.#S(),this.#p(0),this.#$()}))}#S(){this.#e.computedPadding=parseInt(getComputedStyle(this.#t.scroller)["padding-left"],10)}#x(){const{current:t}=this.#s,{itemsCount:s}=this.#e,e=Math.floor((t.displayed-t.perPage)/t.perPage);this.#e.pageCount=Math.ceil(s/t.perPage)-e}#w(){const t=s.querySelector("#"+this.#e.id+"-styles");t&&t.remove();const{displayed:e,gap:i,padding:n,perPage:o,stop:r,behavior:l}=this.#s.current,a=o>1?`*:nth-child(${o}n + 1)`:"*",h=`#${this.#e.id} { --sc-perpage: ${e}; --sc-gap: ${this.#k(i)}; --sc-padding: ${this.#k(n)}; --sc-behavior: ${l}; } #${this.#e.id}__scroller > ${a} { scroll-snap-align: start; scroll-snap-stop: ${r?"always":"normal"} }`;this.styles=this.#b(h,this.#e.id+"-styles"),s.body.append(this.styles)}#u(){const{items:t,scroller:s}=this.#t,e=i.keys(this.#s.default);new o((t=>{let s=t[0];this.#e.isVisible=s.intersectionRatio>.1,this.#e.pause=!this.#e.isVisible,this.#L()}),{threshold:[.1,.9]}).observe(this),this.#s.current.usePause&&(this.addEventListener("mouseenter",(()=>{this.#e.pause=!0,this.#L()})),this.addEventListener("mouseleave",(()=>{this.#e.pause=!1,this.#L()})));const n=new o((t=>{t.forEach((t=>{t.target.toggleAttribute("visible",t.isIntersecting),t.target.toggleAttribute("inert",!t.isIntersecting)}))}),{scroller:s,threshold:.6});t.forEach((t=>n.observe(t)));new MutationObserver((t=>{t.forEach((t=>{"attributes"===t.type&&e.includes(t.attributeName.replace("data-",""))&&this.#c(),"childList"===t.type&&console.log(t)}))})).observe(this,{attributes:!0,childList:!0})}#l(){l(this.resizeTm),this.resizeTm=a((()=>{this.#S(),this.#v()}),100)}#o(){if(this.#e.preventNextEvent)return;if(this.#M(),this.newIndex=this.#e.index,this.#e.preventScrollEvents)return;const t=this.#I();t!=this.#e.index&&(this.newIndex=t,this.#p(t),this.#_("scrollupdate"))}#_(t,s,e){const{current:i}=this.#s;this.#A("Event",t,s,e),this.dispatchEvent(new CustomEvent(t,{detail:this.#e})),i["on"+t]&&i["on"+t](this)}#M(){this.#e.isMoving||this.#_("scrollstart"),this.#e.isMoving=!0}#r(){this.#e.preventNextEvent||(this.#_("scrollend"),this.#e.preventScrollEvents=!1,this.#e.isMoving=!1,"number"==typeof this.newIndex?(this.#p(this.newIndex),this.newIndex=null):this.#p(this.#e.index),this.#$(),this.#L())}#p(t){this.#e.index=t,this.#T(),this.#q(),this.#z(),this.#F()}#I(t){const{scroller:s,items:e}=this.#t,{perPage:i}=this.#s.current,n=this.#d(),o=n?s.scrollLeft:s.scrollLeft+s.clientWidth;let r=e.map((t=>({index:parseInt(t.dataset.index,10),distance:Math.abs((n?t.offsetLeft:t.offsetLeft+t.clientWidth)-(this.#e.computedPadding||0)-o)}))).reduce(((t,s)=>!t||s.distance<t.distance?s:t),null);return t?r:Math.ceil(r.index/i)}#$(){const{perPage:t,clone:s}=this.#s.current,e=this.#e.index,i=this.#e.itemsCount-1;if(!s)return;const{scroller:n,items:o}=this.#t;if(this.#I(!0).distance>1)return;this.#e.preventNextEvent=!0;const r=e*t;let l=o[r],h=o[r+t-1];const c=Math.floor(this.#e.pageCount/2);for(let s=0;s<c;s++)for(let s=0;s<t;s++)l.previousElementSibling||(this.#_("clonebefore","bisque","chocolate"),n.prepend(n.children[i]),l=n.children[0]),h.nextElementSibling||(this.#_("cloneafter","bisque","chocolate"),n.append(n.children[0]),h=n.children[i]);a((()=>{requestIdleCallback((()=>{this.#e.preventNextEvent=!1}),{timeout:200})}),200)}#P(){const{pagination:t}=this.#t;let{container:s,dots:e}=t,{current:i}=this.#s;if(s?(s.innerHTML=null,e.forEach((t=>t.remove())),this.#t.pagination.dots=[]):(s=this.#n("pagination")[0],s.addEventListener("keydown",this.#N.bind(this)),t.container=s),s.style.display=i.nav&&this.#e.pageCount>1?"":"none",i.nav&&s)for(let t=0;t<this.#e.pageCount;t++)this.#O(t)}#C(){const{pager:t}=this.#t,{current:s}=this.#s;t.current||(["current","sep","total"].forEach((s=>{t[s]=this.#n(s)[0]})),t.container=this.shadowRoot.querySelector('[part="pager"]')),t.container.style.display=s.pager&&this.#e.pageCount>1?"":"none",t.current.innerHTML=1,t.total.innerHTML=this.#e.pageCount}#O(t){const{pagination:e}=this.#t,{container:n,dots:o}=e,r=s.createElement("button");r.innerHTML=t+1,r.addEventListener("click",(()=>this.goTo(t))),i.assign(r,{type:"button",part:"button nav-button",ariaControls:this.#t.scroller.id,ariaSelected:!1}),n.append(r),o.push(r)}#N(t){const s=this.#d(),e=this.#t.pagination.dots[this.#e.index]||0;switch(t.key){case"ArrowRight":case"ArrowLeft":const i=e[`${"ArrowRight"===t.key?s?"next":"previous":s?"previous":"next"}ElementSibling`];i&&(i.click(),i.focus())}}#E(){const{controls:t}=this.#t,{current:s}=this.#s,e=!s.controls||this.#e.pageCount<2;t.buttons=[...this.#n("prev-buttons"),...this.#n("next-buttons")],t.buttons.forEach((t=>{t.style=e?"display: none !important;":"",t.hasListener||(t.direction=t.getAttribute("direction")||"next",t.modifier=("next"===t.direction?1:-1)*(parseInt(t.getAttribute("modifier"),10)||1),t.hasListener=!0,t.addEventListener("click",(()=>{s.controls&&this.goTo(this.#e.index+t.modifier)})),i.assign(t,{ariaControls:this.#t.scroller.id}))}))}#n(t){const s=this.shadowRoot.querySelector([`[name="${t}"]`]),i=s.assignedElements();return e.from(i.length?i:s.children)}#q(){if(!this.#s.current.nav)return;const{pagination:t}=this.#t;let{dots:s,active:e}=t;const n=s[this.#e.index];n&&(e&&(i.assign(e,{tabIndex:0,ariaSelected:!1}),e.part="button nav-button"),n.part="button nav-button active",i.assign(n,{tabIndex:-1,ariaSelected:!0}),t.active=n)}#z(){this.#s.current.pager&&(this.#t.pager.current.innerHTML=this.#e.index+1)}#F(){const{loop:t}=this.#s.current,{buttons:s}=this.#t.controls,{index:e,pageCount:i}=this.#e;let n=!1;if(s.forEach((s=>{const o=!t&&("next"===s.direction?e>=i-s.modifier:e<Math.abs(s.modifier));s===this.shadowRoot.activeElement&&o&&(n=!0),s.disabled=o?"disabled":""})),n){const t=s.filter((t=>!t.disabled));t.length&&t[0].focus()}}#T(){const{sync:t}=this.#s.current;t&&this.#e.ready&&(this.#t.sync=this.#t.sync||s.querySelectorAll(t)||[],this.#t.sync.forEach((t=>{t instanceof p&&t.goTo(this.#e.index)})))}#b(t,e){const i=s.createElement("style");return i.id=e,i.type="text/css",i.append(s.createTextNode(t)),i}#d(){return"rtl"!==s.firstElementChild.getAttribute("dir")}#k(t){return"string"==typeof t?t:t+"px"}#L(){if(!this.#s.current.autoplay)return;const{pause:t,isVisible:s}=this.#e;!t&&s?this.#e.autoplayInterval||(this.#e.autoplayInterval=a((()=>{this.#e.autoplayInterval=null,this.goTo(this.#e.index+1)}),this.#s.current.autoplay),this.#A("Play/Pause","Set Timeout")):(l(this.#e.autoplayInterval),this.#e.autoplayInterval=null,this.#A("Play/Pause","Remove Timeout"))}#A(t,s,e="cornflowerblue",i="#FFF"){const n="font-weight: bold;padding: 3px 8px",o="background: aliceblue; color: cornflowerblue;",{current:r}=this.#s;r.debug&&console.log(`%c${t}%c${s}%c#${this.id}]`,o+n,`background: ${e}; color: ${i};font-weight: bold;padding: 3px 8px`,o+n)}}t.customElements&&customElements.define("snap-carousel",p)})(window,document,Array,Object,Element,IntersectionObserver,requestAnimationFrame,clearTimeout,setTimeout);
